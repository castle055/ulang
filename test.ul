#[grammar: assign-gr] {
    tokens {
        INT_NUM = /[0-9]+/
        FLOAT_NUM = /[0-9]*\.[0-9]+/
        ASSIGN = /->/
        ID = /[a-zA-Z_]+[a-zA-Z0-9\-_]*/
        LB = /\{/
        RB = /\}/
        MAIN = /main/
        _WS = / /
        _NL = /\n/
    }
    rules {
        assign = INT_NUM ASSIGN ID <int $3 = $1;\n >
               | FLOAT_NUM ASSIGN ID <double $3 = $1;\n>;
        main_block = assign { main_block };

        main = MAIN LB { main_block } RB <int main(int argc, char* argv[]) {\n%i+$3%i-\n}>;
        root = main;
    }
}

#[grammar: component] {
    tokens {
        COMP_BEGIN = /\|>/
        COMP_END = /<\|/
        PIPE = /\|/
        EQ = /=/
        ID = /[a-zA-Z_]+[a-zA-Z0-9\-_]*/
        _WS = / /
        _NL = /\n/
    }
    rules {
        prop = PIPE ID EQ ID <.$2 = $4,>;
        props_list = prop { props_list } <$1\n$2>;
        props_spec = props_list <.props = {\n%i+$1%i-\n},>;

        component_spec = COMP_BEGIN ID props_spec component_spec COMP_END <COMP($2)({\n%i+$3\n.inner = {\n%i+$4%i-\n},%i-\n})>
                       | COMP_BEGIN ID props_spec COMP_END <COMP($2)({\n%i+$3\n%i-})>;
        inner_list = component_spec { root };

        root = inner_list;
    }
}

[assign-gr|> main { 5 -> a 5 -> b 5 -> t }]

[component|>
    |>VBox
      | spacing = some_var1
      | w = some_var2
    <|
]

[component|>
    |>VBox
      | spacing = some_var1
      | w = some_var2
      |>OtherComponent
        | color = some_clr
      <|
    <|
]

[default|> SomeComponent
  props {
  }
  state {
  }

  redraw {
    <VBox spacing="5" w="dim->cw">
      <OtherComponent color="#FCAE1E"/>
    </VBox>

    |>VBox
      | spacing = some_var1
      | w = some_var2
      |>OtherComponent | color = "#FCAE1E" <|
    <|
  }
]
